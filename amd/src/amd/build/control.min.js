define(["core/ajax","core/log","jquery"],function(r,c,d){"use strict";return{init:function(e){function t(e){const t=e.target.getAttribute("data-courseid");console.log(t);var e=document.querySelector(".cgsfeedback-course-container").getAttribute("data-userid"),c=document.getElementById("cgsfeedback-activities-container-"+t),o=document.getElementById("cgsfeedback-loading-container").getAttribute("data-user-year-level"),n=document.getElementById("cgsfeedback-loading-container").getAttribute("data-user-learning-pathway");null==c?(null!=document.querySelector(`.loading-course-${t}-modules`)&&document.querySelector(`.loading-course-${t}-modules`).removeAttribute("hidden"),r.call([{methodname:"block_cgsfeedback_get_modules",args:{courseid:t,userid:e,yearlevel:o,learningpathway:n},done:function(e){console.log(t),d(`.loading-course-${t}-modules`).replaceWith(e.html),tippy(".outcome-th",{allowHTML:!0,theme:"light"}),tippy(".outcome-td",{allowHTML:!0,theme:"light"}),tippy(".effort-type",{allowHTML:!0,theme:"light"})},fail:function(e){console.log(e)}}])):document.getElementById("cgsfeedback-activities-container-"+t).removeAttribute("hidden"),document.querySelector(`.cgsfeedback-expand-icon[data-courseid="${t}"]`).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-collapse-icon[data-courseid="${t}"]`).removeAttribute("hidden"),document.querySelector(".cgsfeedback-container-"+t).classList.remove("expansible-container"),document.querySelector(".cgsfeedback-container-"+t).classList.add("collapsible-container"),document.querySelectorAll(`.cgsfeedback-container-${t}.collapsible-container`).forEach(e=>e.addEventListener("click",i))}function i(e){courseid=e.target.getAttribute("data-courseid"),document.getElementById("cgsfeedback-activities-container-"+courseid).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-collapse-icon[data-courseid="${courseid}"]`).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-expand-icon[data-courseid="${courseid}"]`).removeAttribute("hidden"),document.querySelectorAll(`.cgsfeedback-container-${courseid}.collapsible-container`).forEach(e=>e.removeEventListener("click",i)),document.querySelector(".cgsfeedback-container-"+courseid).classList.remove("collapsible-container"),document.querySelector(".cgsfeedback-container-"+courseid).classList.add("expansible-container"),document.querySelectorAll(`.cgsfeedback-container-${courseid}.expansible-container`).forEach(e=>e.addEventListener("click",t))}c.debug("block_cgsfeedback/control: initializing controls of the cgsfeedback block"),console.log(e),null==document.getElementById(e)?c.debug("block_cgsfeedback/control: section not found!"):document.querySelectorAll(".expansible-container").forEach(e=>e.addEventListener("click",t))}}});
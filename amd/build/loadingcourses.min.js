/**
 * Provides the block_cgsfeedback/control module
 *
 * @package   block_cgsfeedback
 * @category  output
 * @copyright 2023 onwards Veronica Bermegui
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_cgsfeedback/loadingcourses",["core/url","core/ajax","core/log","core/templates"],(function(URL,Ajax,Log,Templates){return{init:function(user){Log.debug("block_cgsfeedback/loadingcourses: initializing loadingcourses of the cgsfeedback block");var instanceid=document.querySelector(".cgsfeedback-loading-courses").getAttribute("data-instanceid");if(null!=document.getElementById("inst".concat(instanceid))){null!=document.querySelector(".cgsfeedback-instructions-container .fa-eye")&&document.querySelector(".cgsfeedback-instructions-container .fa-eye").addEventListener("click",(function(e){Array.from(e.target.classList).includes("fa-eye")?(e.target.classList.remove("fa-eye"),e.target.classList.add("fa-eye-slash"),e.target.setAttribute("title","Show instructions"),document.querySelector(".cgsfeedback-instructions-container span").classList.add("cgsfeedback-hide-instructions")):(e.target.classList.add("fa-eye"),e.target.classList.remove("fa-eye-slash"),e.target.setAttribute("title","Hide instructions"),document.querySelector(".cgsfeedback-instructions-container span").classList.remove("cgsfeedback-hide-instructions"))}));!function(){var user=document.querySelector(".cgsfeedback-loading-courses").getAttribute("data-user"),instanceid=document.querySelector("[data-block=cgsfeedback]").getAttribute("id");Ajax.call([{methodname:"block_cgsfeedback_get_courses",args:{user:user},done:function(response){var context=JSON.parse(response.ctx);context.instanceid=instanceid,document.getElementById("cgsfeedback-loading-container").classList.remove("cgsfeedback-loading-courses-first"),null==context.courses?(context.text="Assignments not found",Templates.renderForPromise("block_cgsfeedback/no_content",context).then((function(_ref){var html=_ref.html,js=_ref.js;Templates.replaceNodeContents("#cgsfeedback-loading-container",html,js)})).catch((function(error){return displayException(error)}))):Templates.renderForPromise("block_cgsfeedback/content",context).then((function(_ref2){var html=_ref2.html,js=_ref2.js;Templates.replaceNodeContents("#cgsfeedback-loading-container",html,js)})).catch((function(error){return displayException(error)}))},fail:function(reason){console.log(reason)}}])}()}else Log.debug("block_cgsfeedback/control: section not found!")}}}));

//# sourceMappingURL=loadingcourses.min.js.map
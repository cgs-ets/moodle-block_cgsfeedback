define(["core/url","core/ajax","core/log","core/templates"],function(e,s,t,n){"use strict";return{init:function(e){t.debug("block_cgsfeedback/loadingcourses: initializing loadingcourses of the cgsfeedback block"),t.debug("gradecategories"),t.debug(e);var c=document.querySelector(".cgsfeedback-loading-courses").getAttribute("data-instanceid");if(null!=document.getElementById("inst"+c)){null!=document.querySelector(".cgsfeedback-instructions-container .fa-eye")&&document.querySelector(".cgsfeedback-instructions-container .fa-eye").addEventListener("click",function(e){var t=Array.from(e.target.classList);t.includes("fa-eye")?(e.target.classList.remove("fa-eye"),e.target.classList.add("fa-eye-slash"),e.target.setAttribute("title","Show instructions"),document.querySelector(".cgsfeedback-instructions-container span").classList.add("cgsfeedback-hide-instructions")):(e.target.classList.add("fa-eye"),e.target.classList.remove("fa-eye-slash"),e.target.setAttribute("title","Hide instructions"),document.querySelector(".cgsfeedback-instructions-container span").classList.remove("cgsfeedback-hide-instructions"))});{c=document.querySelector(".cgsfeedback-loading-courses").getAttribute("data-user");let t=document.querySelector("[data-block=cgsfeedback]").getAttribute("id");s.call([{methodname:"block_cgsfeedback_get_courses",args:{user:c,gradecategories:e},done:function(e){e=JSON.parse(e.ctx);e.instanceid=t,document.getElementById("cgsfeedback-loading-container").classList.remove("cgsfeedback-loading-courses-first"),null==e.courses?(e.text="Assignments not found",n.renderForPromise("block_cgsfeedback/no_content",e).then(({html:e,js:t})=>{n.replaceNodeContents("#cgsfeedback-loading-container",e,t)}).catch(e=>displayException(e))):n.renderForPromise("block_cgsfeedback/content",e).then(({html:e,js:t})=>{n.replaceNodeContents("#cgsfeedback-loading-container",e,t)}).catch(e=>displayException(e))},fail:function(e){console.log(e)}}])}}else t.debug("block_cgsfeedback/control: section not found!")}}});
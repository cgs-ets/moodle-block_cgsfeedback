/**
 * Provides the block_cgsfeedback/control module
 *
 * @package   block_cgsfeedback
 * @category  output
 * @copyright 2023 onwards Veronica Bermegui
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_cgsfeedback/control",["core/url","core/ajax","core/log","core/templates"],(function(URL,Ajax,Log,Templates){return{init:function(instanceid){function expandTable(e){console.log("expandTable"),console.log(e.target.getAttribute("data-courseid")),courseid=e.target.getAttribute("data-courseid"),userid=document.querySelector(".cgsfeedback-course-container").getAttribute("data-userid");var table=document.getElementById("cgsfeedback-activities-container-".concat(courseid));console.log(table),null==table?(document.querySelector(".loading-course-".concat(courseid,"-modules")).removeAttribute("hidden"),Ajax.call([{methodname:"block_cgsfeedback_get_modules",args:{courseid:courseid,userid:userid},done:function(response){$(".loading-course-".concat(courseid,"-modules")).replaceWith(response.html)},fail:function(reason){console.log(reason)}}])):document.getElementById("cgsfeedback-activities-container-".concat(courseid)).removeAttribute("hidden"),document.querySelector('.cgsfeedback-expand-icon[data-courseid="'.concat(courseid,'"]')).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-collapse-icon[data-courseid="'.concat(courseid,'"]')).removeAttribute("hidden")}function collapseTable(e){console.log("collapseTable"),console.log(e.target.getAttribute("data-courseid")),courseid=e.target.getAttribute("data-courseid"),document.getElementById("cgsfeedback-activities-container-".concat(courseid)).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-collapse-icon[data-courseid="'.concat(courseid,'"]')).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-expand-icon[data-courseid="'.concat(courseid,'"]')).removeAttribute("hidden")}Log.debug("block_cgsfeedback/control: initializing controls of the cgsfeedback block"),null!=document.getElementById("inst".concat(instanceid))?(document.querySelectorAll("section#inst32  img").forEach((function(image){var urlEncoded=encodeURIComponent(image.getAttribute("src"));console.log(urlEncoded);var userid=document.querySelector(".cgsfeedback-course-container").getAttribute("data-userid"),newURL=URL.relativeUrl("/local/parentview/get.php",{addr:urlEncoded,user:userid});image.setAttribute("src",newURL)})),document.querySelectorAll(".cgsfeedback-expand-icon").forEach((function(icon){return icon.addEventListener("click",expandTable)})),document.querySelectorAll(".cgsfeedback-collapse-icon").forEach((function(icon){return icon.addEventListener("click",collapseTable)}))):Log.debug("block_cgsfeedback/control: section not found!")}}}));

//# sourceMappingURL=control.min.js.map
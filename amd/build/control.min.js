define(["core/ajax","core/log"],function(o,n){"use strict";return{init:function(e){function c(e){const c=e.target.getAttribute("data-courseid");console.log(c);e=document.querySelector(".cgsfeedback-course-container").getAttribute("data-userid");null==document.getElementById("cgsfeedback-activities-container-"+c)?(null!=document.querySelector(`.loading-course-${c}-modules`)&&document.querySelector(`.loading-course-${c}-modules`).removeAttribute("hidden"),o.call([{methodname:"block_cgsfeedback_get_modules",args:{courseid:c,userid:e},done:function(e){console.log(c),$(`.loading-course-${c}-modules`).replaceWith(e.html),tippy(".outcome-th",{allowHTML:!0,theme:"light"}),tippy(".outcome-td",{allowHTML:!0,theme:"light"}),tippy(".effort-type",{allowHTML:!0,theme:"light"})},fail:function(e){console.log(e)}}])):document.getElementById("cgsfeedback-activities-container-"+c).removeAttribute("hidden"),document.querySelector(`.cgsfeedback-expand-icon[data-courseid="${c}"]`).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-collapse-icon[data-courseid="${c}"]`).removeAttribute("hidden"),document.querySelector(".cgsfeedback-container-"+c).classList.remove("expansible-container"),document.querySelector(".cgsfeedback-container-"+c).classList.add("collapsible-container"),document.querySelectorAll(`.cgsfeedback-container-${c}.collapsible-container`).forEach(e=>e.addEventListener("click",t))}function t(e){courseid=e.target.getAttribute("data-courseid"),document.getElementById("cgsfeedback-activities-container-"+courseid).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-collapse-icon[data-courseid="${courseid}"]`).setAttribute("hidden",!0),document.querySelector(`.cgsfeedback-expand-icon[data-courseid="${courseid}"]`).removeAttribute("hidden"),document.querySelectorAll(`.cgsfeedback-container-${courseid}.collapsible-container`).forEach(e=>e.removeEventListener("click",t)),document.querySelector(".cgsfeedback-container-"+courseid).classList.remove("collapsible-container"),document.querySelector(".cgsfeedback-container-"+courseid).classList.add("expansible-container"),document.querySelectorAll(`.cgsfeedback-container-${courseid}.expansible-container`).forEach(e=>e.addEventListener("click",c))}n.debug("block_cgsfeedback/control: initializing controls of the cgsfeedback block"),console.log(e),null==document.getElementById(e)?n.debug("block_cgsfeedback/control: section not found!"):document.querySelectorAll(".expansible-container").forEach(e=>e.addEventListener("click",c))}}});
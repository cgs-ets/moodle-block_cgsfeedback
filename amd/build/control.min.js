/**
 * Provides the block_cgsfeedback/control module
 *
 * @package   block_cgsfeedback
 * @category  output
 * @copyright 2023 onwards Veronica Bermegui
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_cgsfeedback/control",["core/ajax","core/log"],(function(Ajax,Log){return{init:function(instanceid){function expandTable(e){var courseid=e.target.getAttribute("data-courseid");console.log(courseid);var userid=document.querySelector(".cgsfeedback-course-container").getAttribute("data-userid"),gradecategories=document.querySelector(".cgsfeedback-container-".concat(courseid)).getAttribute("data-course-grade-categories");null==document.getElementById("cgsfeedback-activities-container-".concat(courseid))?(null!=document.querySelector(".loading-course-".concat(courseid,"-modules"))&&document.querySelector(".loading-course-".concat(courseid,"-modules")).removeAttribute("hidden"),Ajax.call([{methodname:"block_cgsfeedback_get_modules",args:{courseid:courseid,userid:userid,gradecategories:gradecategories},done:function(response){console.log(courseid),$(".loading-course-".concat(courseid,"-modules")).replaceWith(response.html)},fail:function(reason){console.log(reason)}}])):document.getElementById("cgsfeedback-activities-container-".concat(courseid)).removeAttribute("hidden"),document.querySelector('.cgsfeedback-expand-icon[data-courseid="'.concat(courseid,'"]')).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-collapse-icon[data-courseid="'.concat(courseid,'"]')).removeAttribute("hidden"),document.querySelector(".cgsfeedback-container-".concat(courseid)).classList.remove("expansible-container"),document.querySelector(".cgsfeedback-container-".concat(courseid)).classList.add("collapsible-container"),document.querySelectorAll(".cgsfeedback-container-".concat(courseid,".collapsible-container")).forEach((function(el){return el.addEventListener("click",collapseTable)}))}function collapseTable(e){courseid=e.target.getAttribute("data-courseid"),document.getElementById("cgsfeedback-activities-container-".concat(courseid)).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-collapse-icon[data-courseid="'.concat(courseid,'"]')).setAttribute("hidden",!0),document.querySelector('.cgsfeedback-expand-icon[data-courseid="'.concat(courseid,'"]')).removeAttribute("hidden"),document.querySelectorAll(".cgsfeedback-container-".concat(courseid,".collapsible-container")).forEach((function(el){return el.removeEventListener("click",collapseTable)})),document.querySelector(".cgsfeedback-container-".concat(courseid)).classList.remove("collapsible-container"),document.querySelector(".cgsfeedback-container-".concat(courseid)).classList.add("expansible-container"),document.querySelectorAll(".cgsfeedback-container-".concat(courseid,".expansible-container")).forEach((function(el){return el.addEventListener("click",expandTable)}))}Log.debug("block_cgsfeedback/control: initializing controls of the cgsfeedback block"),console.log(instanceid),null!=document.getElementById(instanceid)?document.querySelectorAll(".expansible-container").forEach((function(el){return el.addEventListener("click",expandTable)})):Log.debug("block_cgsfeedback/control: section not found!")}}}));

//# sourceMappingURL=control.min.js.map